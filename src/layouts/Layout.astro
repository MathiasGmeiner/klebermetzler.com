---
import type { Props } from "@/types";
import AstroDebugger from "@/components/AstroDebugger.astro";
import Footer from "@components/Footer.astro";
import Header from "@components/Header.astro";
import { ViewTransitions } from "astro:transitions";

const { meta } = Astro.props.page;
const metaTitle = meta.find((item) => item.tag === "title")?.content;
const metaTags = meta.filter((item) => item.tag !== "title");
---

<!doctype html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <link
      rel="preload"
      href="/fonts/national-2-narrow-medium.woff2"
      as="font"
      type="font/woff2"
      crossorigin=""
    />
    <link
      rel="preload"
      href="/fonts/national-2-compressed-regular.woff2"
      as="font"
      type="font/woff2"
      crossorigin=""
    />
    <link
      rel="preload"
      href="/fonts/national-2-compressed-extrabold.woff2"
      as="font"
      type="font/woff2"
      crossorigin=""
    />
    {
      metaTags.map((item) => {
        if (item.attributes.name) {
          return (
            <meta
              name={item.attributes.name}
              content={item.attributes.content}
            />
          );
        }
        return (
          <meta
            property={item.attributes.property}
            content={item.attributes.content}
          />
        );
      })
    }
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content={Astro.generator} />
    <title>{metaTitle}</title>
    {
      import.meta.env.DEV && (
        <AstroDebugger page={Astro.props.page} global={Astro.props.global} />
      )
    }
    <ViewTransitions />
  </head>
  <body>
    <Header global={Astro.props.global} />
    <slot />
    <Footer global={Astro.props.global} />
    <style is:global>
      @font-face {
        font-family: "pp-editorial-new";
        src: url("/fonts/PPEditorialNew-Regular.woff2") format("woff2");
        font-weight: normal;
        font-style: normal;
        font-display: swap;
      }

      @font-face {
        font-family: "national-2-narrow-medium";
        src: url("/fonts/national-2-narrow-medium.woff2") format("woff2");
        font-weight: normal;
        font-style: normal;
        font-display: swap;
      }

      @font-face {
        font-family: "national-2-compressed-regular";
        src: url("/fonts/national-2-compressed-regular.woff2") format("woff2");
        font-weight: normal;
        font-style: normal;
        font-display: swap;
      }

      @font-face {
        font-family: "national-2-compressed-extrabold";
        src: url("/fonts/national-2-compressed-extrabold.woff2") format("woff2");
        font-weight: normal;
        font-style: normal;
        font-display: swap;
      }

      :root {
        --font-national-narrow-medium: "national-2-narrow-medium", sans-serif;
        --font-national-compressed-regular: "national-2-compressed-regular",
          sans-serif;
        --font-national-narrow-extrabold: "national-2-narrow-extrabold",
          sans-serif;
        --font-pp-editorial-new: "pp-editorial-new", sans-serif;
      }

      body {
        font-family: var(--font-national-narrow-medium);
      }
    </style>
  </body>
</html>
