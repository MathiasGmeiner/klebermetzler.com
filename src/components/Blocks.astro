---
import type { Layout, Block as BlockType } from "@/types";
import BlockFallback from "@/blocks/BlockFallback.astro";
import BlockText from "@blocks/BlockText.astro";
import BlockHighlight from "@blocks/BlockHighlight.astro";
import BlockVideo from "@blocks/BlockVideo.astro";
import BlockImage from "@blocks/BlockImage.astro";
import BlockIntroImageText from "@blocks/BlockIntroImageText.astro";
const layout: Layout = Astro.props.layout;
const isFirstLayout: boolean = Astro.props.isFirstLayout;
const items: BlockType[] = Astro.props.blocks;

const blocks = {
  text: BlockText,
  highlight: BlockHighlight,
  video: BlockVideo,
  image: BlockImage,
  "intro-image-text": BlockIntroImageText,
};
---

{
  items?.map((block) => {
    const Block = blocks[block.type] || BlockFallback;
    return <Block {...block} layout={layout} isFirstLayout={isFirstLayout} />;
  })
}
